(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();const u=document.querySelector("#user-interface"),I=document.querySelector("#home-icon"),M=document.querySelector("#nav-home"),U=document.querySelector("#currencies"),$=document.querySelector("#categories");document.querySelector("#exchanges");document.querySelector("#favorites");document.getElementById("search-input");const D=document.getElementById("goToTopButton"),b="a107740d-e18a-428f-8890-de5bf46638e0",w="api",i=JSON.parse(localStorage.getItem("data"))||{},A=w+"v1/global-metrics/quotes/latest?convert=USD";async function O(){try{const e=await fetch(A,{method:"GET",cache:"no-cache",headers:{Accept:"application/json","X-CMC_PRO_API_KEY":b}});if(!e.ok)throw new Error(e.status);return await e.json()}catch(e){throw e}}function x(e){const n=new Date(e);return new Date-n<=60*60*1e3}const B=["Title","name","symbol"],j=["market_capital","dominance","Percentage","m_cap","price","volume_7d","volume_24h","change_7d","change_24h","v_change_24h","volume","avg_p_change","m_cap_change","v_change"],R=["dominance","Percentage","change_7d","change_24h","v_change_24h","avg_p_change","m_cap_change","v_change"];function h(e,n){let t;return B.indexOf(n)!==-1?t=q(e):j.indexOf(n)!==-1?t=G(e,n):t=e,t}function q(e){return e.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}function G(e,n){return R.indexOf(n)!==-1?e==null?"   -":` ${e.toFixed(2)} %`:e>=1e12?`$ ${(e/1e12).toFixed(1)} T`:e>=1e9?`$ ${(e/1e9).toFixed(1)} B`:e>=1e6?`$ ${(e/1e6).toFixed(1)} M`:e>=1e3?`$ ${(e/1e3).toFixed(1)} K`:e==null?"   -":`$ ${e.toFixed(2)}`}const J=(e,n)=>{const t=document.createElement("div");t.className="global-metric";const o=document.createElement("p"),a=h(e,"Title");o.textContent=a,t.appendChild(o);const c=document.createElement("table");return F(c,n,e),t.appendChild(c),t},F=(e,n,t)=>{Object.keys(n).forEach(o=>{let a=h(o,"Title"),c=h(n[o],t),l=e.insertRow(),s=l.insertCell(),r=document.createTextNode(a);s.appendChild(r);let d=l.insertCell(),m=document.createTextNode(c);d.appendChild(m)})},H=async()=>{let e;i.globalMetricsData===void 0||Object.keys(i.globalMetricsData).length===0?(i.globalMetricsData=await O(),localStorage.setItem("data",JSON.stringify(i))):e=i.globalMetricsData.status.timestamp,x(e)||(i.globalMetricsData=await O(),localStorage.setItem("data",JSON.stringify(i)));const t=K(i.globalMetricsData.data),o=document.createElement("div");return o.className="global-container",Object.keys(t).forEach(a=>{const c=J(a,t[a]);o.appendChild(c)}),o};function K(e){const{btc_dominance:n,btc_dominance_24h_percentage_change:t,eth_dominance:o,eth_dominance_24h_percentage_change:a,quote:{USD:{total_market_cap:c,stablecoin_market_cap:l,altcoin_market_cap:s,defi_market_cap:r,total_volume_24h:d,stablecoin_volume_24h:m,altcoin_volume_24h:p,defi_volume_24h:_}}}=e;return{market_capital:{total_market_cap:c,stablecoin_market_cap:l,altcoin_market_cap:s,defi_market_cap:r},dominance:{btc_dominance:n,btc_dominance_24h_change:t,eth_dominance:o,eth_dominance_24h_change:a},volume:{total_volume_24h:d,stablecoin_volume_24h:m,defi_volume_24h:_,altcoin_volume_24h:p}}}async function f(e){const n=w+`v1/cryptocurrency/listings/latest?start=${e}&sort=market_cap&cryptocurrency_type=all&tag=all&limit=100&aux=num_market_pairs,cmc_rank,date_added,tags,platform,max_supply,circulating_supply,total_supply,market_cap_by_total_supply,volume_24h_reported,volume_7d,volume_7d_reported,volume_30d,volume_30d_reported,is_market_cap_included_in_calc`;try{const t=await fetch(n,{method:"GET",cache:"no-cache",headers:{Accept:"application/json","X-CMC_PRO_API_KEY":b}});if(!t.ok)throw new Error(t.status);const o=await t.json();return console.log("fetched currencies",e),o}catch(t){throw t}}const S=e=>{const n=document.createElement("table");return X(n,e),Y(n,e[0]),n},Y=(e,n)=>{let t=e.createTHead(),o=t.insertRow();for(let a in n){let c=document.createElement("th"),l=h(a,"Title"),s=document.createTextNode(l);c.appendChild(s),o.appendChild(c)}t.appendChild(o),e.appendChild(t)},X=(e,n)=>{const t=["rank","m_cap","name","price","symbol","volume_7d","volume_24h","tokens","volume","num"],o=["change_7d","change_24h","v_change_24h","avg_p_change","m_cap_change","v_change"],a=document.createElement("tbody");n.forEach(c=>{const l=document.createElement("tr");Object.keys(c).forEach(s=>{if(t.indexOf(s)>=0){const r=document.createElement("td"),d=document.createElement("div"),m=document.createElement("p"),p=h(c[s],s);m.innerText=p,d.appendChild(m),r.appendChild(d),l.appendChild(r)}if(o.indexOf(s)>=0){const r=document.createElement("td"),d=document.createElement("div"),m=document.createElement("span"),p=document.createElement("i"),_=h(c[s],s);c[s]>=0?m.classList.add("up"):m.classList.add("down"),c[s]>=0?p.className="fa fa-caret-up up":p.className="fa fa-caret-down down",d.appendChild(p),m.innerText=_,d.appendChild(m),r.appendChild(d),l.appendChild(r)}}),a.appendChild(l)}),e.appendChild(a)},T=100;let g,y;const N=(e,n,t)=>{const o=Math.ceil(n/T);let a=Math.floor(e/T)+1;e<301?g=1:g=a-2,o>5?y=g+4:y=o;const c=document.createElement("ul");c.className="paginationList";const l=document.createElement("button");l.id="prevBtn",l.textContent="Prev",l.addEventListener("click",()=>{let r=a;r--,C(r,t)}),e===1&&(l.disabled=!0,l.className="disabled"),c.appendChild(l);for(let r=g;r<=y;r++){const d=document.createElement("button");d.id=`page${r}`,d.textContent=r,d.value=r,parseInt(d.value)===a&&(d.className="button-active"),d.addEventListener("click",m=>{C(parseInt(m.target.value),t)}),c.appendChild(d)}const s=document.createElement("button");return s.id="nextBtn",s.textContent="Next",s.addEventListener("click",()=>{let r=a;r++,C(r,t)}),a>=o&&(s.disabled=!0,s.className="disabled"),c.appendChild(s),c};async function C(e,n){const t=(e-1)*T+1;await n(t)}const z=async(e,n)=>{let t;if(i.currencyListData===void 0||Object.keys(i.currencyListData).length===0){const r=await f(e);i.currencyListData={[e]:r},localStorage.setItem("data",JSON.stringify(i))}else if(i.currencyListData[e]===void 0||Object.keys(i.currencyListData[e]).length===0){const r=await f(e);i.currencyListData[e]=r,localStorage.setItem("data",JSON.stringify(i))}else t=i.currencyListData[e].status.timestamp,x(t)||(i.currencyListData[e]=await f(e),localStorage.setItem("data",JSON.stringify(i)));const o=i.currencyListData[e].data.map(r=>V(r)),a=S(o),c=document.createElement("div");c.className="list-container";const l=i.currencyListData[e].status.total_count,s=N(e,l,n);return c.appendChild(s),c.appendChild(a),c};function V(e){const{name:n,symbol:t,cmc_rank:o,quote:{USD:{price:a,market_cap:c,percent_change_24h:l,percent_change_7d:s,volume_change_24h:r,volume_24h:d,volume_7d:m}}}=e;return{rank:o,name:n,symbol:t,price:a,change_24h:l,change_7d:s,m_cap:c,volume_24h:d,volume_7d:m,v_change_24h:r}}async function v(e){const n=w+`v1/cryptocurrency/categories?start=${e}&limit=100`;try{const t=await fetch(n,{method:"GET",cache:"no-cache",headers:{Accept:"application/json","X-CMC_PRO_API_KEY":b}});if(!t.ok)throw new Error(t.status);const o=await t.json();return console.log("fetched categories",e),o}catch(t){throw t}}const Q=async(e,n)=>{let t;if(i.categoryListData===void 0){const r=await v(e);i.categoryListData={[e]:r},localStorage.setItem("data",JSON.stringify(i))}else if(i.categoryListData[e]===void 0||Object.keys(i.categoryListData[e]).length===0){const r=await v(e);i.categoryListData[e]=r,localStorage.setItem("data",JSON.stringify(i))}else t=i.categoryListData[e].status.timestamp,x(t)||(i.categoryListData[e]=await v(e),localStorage.setItem("data",JSON.stringify(i)));const o=i.categoryListData[e].data.map((r,d)=>{const m=e+d;return W(r,m)}),a=S(o),c=document.createElement("div");c.className="list-container";const s=N(e,300,n);return c.appendChild(s),c.appendChild(a),c};function W(e,n){const{name:t,num_tokens:o,avg_price_change:a,market_cap:c,market_cap_change:l,volume:s,volume_change:r}=e;return{num:n,name:t,tokens:o,avg_p_change:a,m_cap:c,m_cap_change:l,volume:s,v_change:r}}const L=e=>{const n=document.createElement("div");n.className="error-component";const t=document.createElement("h3");t.textContent="ERROR !",n.appendChild(t);const o=document.createElement("h1");o.textContent=e.message;let a="";switch(e.message){case"400":a="Invalid argument or input!";break;case"401":a="Unauthorized API Key!";break;case"404":a="Page not found!";break;case"429":a="API Key rate limit exceeded!";break;case"500":a="Something went wrong!";break;default:o.textContent="",a="Something went wrong!";break}n.appendChild(o);const c=document.createElement("p");return c.textContent=a,n.appendChild(c),n},Z=async()=>{window.addEventListener("scroll",te),await E(),I.addEventListener("click",async()=>{await E()}),M.addEventListener("click",async()=>{await E()}),U.addEventListener("click",async()=>{P(1)}),$.addEventListener("click",async()=>{k(1)}),D.addEventListener("click",ee)},E=async()=>{u.innerHTML="";try{const e=await H();u.appendChild(e)}catch(e){console.log(e);const n=L(e);u.appendChild(n)}},P=async e=>{u.innerHTML="";try{const n=await z(e,t=>{P(t)});u.appendChild(n)}catch(n){console.log(n);const t=L(n);u.appendChild(t)}},k=async e=>{u.innerHTML="";try{const n=await Q(e,t=>{k(t)});u.appendChild(n)}catch(n){console.log(n);const t=L(n);u.appendChild(t)}},ee=()=>{window.scrollTo({top:0,behavior:"smooth"})},te=()=>{document.body.scrollTop>20||document.documentElement.scrollTop>20?D.style.display="block":D.style.display="none"},ne=()=>{Z()};window.addEventListener("load",ne);
